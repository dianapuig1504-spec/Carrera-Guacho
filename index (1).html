<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>La carrera de Guacho</title>

<style>
body{margin:0;overflow:hidden;background:black;font-family:Arial,sans-serif;color:white;text-align:center;}
#title{position:absolute;top:5px;width:100%;font-size:22px;color:red;z-index:6;}
#road{position:absolute;width:300px;height:100vh;background:#111;left:50%;transform:translateX(-50%);border-left:5px solid #333;border-right:5px solid #333;}
#playerName{position:absolute;top:35px;width:100%;color:#ccc;font-size:16px;z-index:5;}
#counter{position:absolute;top:60px;width:100%;color:#ccc;font-size:16px;z-index:5;}
#instructions{position:absolute;top:50%;width:100%;font-size:18px;color:#aaa;z-index:6;}

#car{position:absolute;font-size:50px;bottom:80px;left:50%;transform:translateX(-50%);}
.tire{position:absolute;width:50px;height:50px;background:radial-gradient(circle,#333 40%,black 60%);border-radius:50%;}

#finish{position:absolute;width:300px;height:30px;left:50%;transform:translateX(-50%);top:-300px;background:repeating-linear-gradient(90deg,white 0, white 20px, black 20px, black 40px);}

.bat{position:absolute;font-size:25px;animation:fly linear infinite;}
@keyframes fly{from{transform:translateX(100vw);}to{transform:translateX(-100px);}}

#loveScreen,#gameOver{display:none;position:absolute;top:0;left:0;width:100%;height:100%;background:black;z-index:10;padding:40px 25px;}
button{margin-top:20px;padding:12px 20px;font-size:16px;background:red;border:none;color:white;border-radius:8px;}
h1{color:red;}
.signature{margin-top:25px;color:#888;font-style:italic;}
</style>
</head>

<body>

<div id="title">üèÅ La carrera de Guacho üèÅ</div>
<div id="playerName">Piloto: GUACHO</div>
<div id="counter">Llantas esquivadas: 0 / 15</div>
<div id="instructions">Toca la pantalla para mover el coche y esquivar 15 llantas</div>

<div id="road"></div>
<div id="car">üèéÔ∏è</div>
<div id="finish"></div>

<div id="loveScreen">
    <p>
      Estoy tan orgullosa de ti.  
      No importa cu√°ntos obst√°culos haya en la pista o en la vida,  
      siempre voy a estar apoy√°ndote en cada carrera que corras.  
      Amo tu fuerza, tu valent√≠a y tu forma de seguir adelante.  
      Te amo, piloto.
    </p>
    <div class="signature">‚Äî DK</div>
</div>

<div id="gameOver">
    <h1>üí• Choque‚Ä¶</h1>
    <p>Hasta los mejores pilotos vuelven a intentarlo.</p>
    <button onclick="restartGame()">Reintentar carrera</button>
</div>

<script>
const car=document.getElementById("car");
const finish=document.getElementById("finish");
const loveScreen=document.getElementById("loveScreen");
const gameOver=document.getElementById("gameOver");
const road=document.getElementById("road");
const instructions=document.getElementById("instructions");
const counter=document.getElementById("counter");

let roadLeft=road.offsetLeft;
let roadWidth=300;
let gameEnded=false;
let distance=0;
let obstaclesPassed=0;
let tires=[];

function moveCar(x){
    instructions.style.display="none";
    if(gameEnded)return;
    let newX=x-25;
    if(newX<roadLeft+5)newX=roadLeft+5;
    if(newX>roadLeft+roadWidth-55)newX=roadLeft+roadWidth-55;
    car.style.left=newX+"px";
}
document.addEventListener("touchstart",e=>moveCar(e.touches[0].clientX));
document.addEventListener("click",e=>moveCar(e.clientX));

function createTire(){
    if(obstaclesPassed>=15||gameEnded)return;
    const tire=document.createElement("div");
    tire.classList.add("tire");
    tire.style.left=roadLeft+10+Math.random()*(roadWidth-70)+"px";
    tire.style.top="-60px";
    document.body.appendChild(tire);
    tires.push(tire);

    let y=-60;
    const fall=setInterval(()=>{
        if(gameEnded){clearInterval(fall);return;}
        y+=6;
        tire.style.top=y+"px";

        const c=car.getBoundingClientRect();
        const t=tire.getBoundingClientRect();

        if(c.left<t.right&&c.right>t.left&&c.top<t.bottom&&c.bottom>t.top){
            gameEnded=true;
            gameOver.style.display="block";
            clearInterval(fall);
        }

        if(y>window.innerHeight){
            obstaclesPassed++;
            counter.innerText="Llantas esquivadas: "+obstaclesPassed+" / 15";
            tire.remove();
            clearInterval(fall);
        }
    },30);
}
setInterval(createTire,1300);

const race=setInterval(()=>{
    if(gameEnded)return;
    distance+=3;
    finish.style.top=(-300+distance)+"px";
    if(obstaclesPassed>=15&&distance>1500){
        gameEnded=true;
        loveScreen.style.display="block";
    }
},40);

function createBat(){
    const bat=document.createElement("div");
    bat.classList.add("bat");
    bat.innerText="ü¶á";
    bat.style.top=Math.random()*window.innerHeight+"px";
    bat.style.animationDuration=(Math.random()*5+5)+"s";
    document.body.appendChild(bat);
    setTimeout(()=>bat.remove(),10000);
}
setInterval(createBat,900);

function restartGame(){
    gameEnded=false;
    distance=0;
    obstaclesPassed=0;
    counter.innerText="Llantas esquivadas: 0 / 15";
    finish.style.top="-300px";
    gameOver.style.display="none";
    instructions.style.display="block";
    car.style.left="50%";
    car.style.transform="translateX(-50%)";
    tires.forEach(t=>t.remove());
    tires=[];
}
</script>
</body>
</html>
